### Implement LSH Ensemble in Postgres

- A raw table is like the one following where both *A* and *B* are domains. The data is pulled from table `public.df0`
![raw_table](./raw_table.png)
- We will compute the minHash values of each domain/ column using the minHash functions in order to first construct the signature matrix. The code for this part is in `construct_sig.sql`. In the file, we first declare a function `min_hash` that takes in a number in the raw table as its first argument, and a hash number as its second argument that specifies which minHash function to use. This `min_hash` is written in C and loaded into Postgres through this declaration. The source code for `min_hash` in C is in `user-defined funcs/funcs.c`. After having the minimum values of each domain, we insert the values into `public.sig_table` using function `insert_sig`. An example of the signature matrix is shown as below (The column for B h)
![sig_table](./sig_table.png)
- The `public.sig_table` is grouped using the number of bands and each entry in the table is an array including the minHash values generated by r hash functions (if there are r hash functions in each band). Then we can pass this array of values into `min_hash_array` in `sig_table.sql` to get a hash value for this signature